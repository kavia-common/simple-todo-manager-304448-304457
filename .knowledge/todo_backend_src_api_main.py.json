{"is_source_file": true, "format": "Python", "description": "This is the main source file implementing a REST API using FastAPI for a todo list application with SQLite backend, including database initialization, CRUD operations, and health check endpoint.", "external_files": ["os", "sqlite3", "datetime", "typing", "fastapi", "fastapi.middleware.cors", "pydantic"], "external_methods": ["fastapi.FastAPI", "fastapi.HTTPException", "fastapi.Path", "fastapi.Response", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field"], "published": ["app", "health_check", "create_todo", "list_todos", "get_todo", "update_todo", "delete_todo", "toggle_todo"], "classes": [{"name": "TodoBase", "description": "Shared Todo fields."}, {"name": "TodoCreate", "description": "Request model for creating a todo."}, {"name": "TodoUpdate", "description": "Request model for updating a todo (full update semantics)."}, {"name": "Todo", "description": "Response model for a todo item."}, {"name": "TodoList", "description": "Response model for a list of todos."}], "methods": [{"name": "str _utc_now_iso()", "description": "Return current UTC time in ISO-8601 format with 'Z' suffix.", "scope": "", "scopeKind": ""}, {"name": "str get_db_path()", "description": "Get the configured SQLite database path, checking environment variables.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection _connect()", "description": "Create a SQLite connection with row_factory for dict-like access.", "scope": "", "scopeKind": ""}, {"name": "None _init_db()", "description": "Initialize the database schema if it does not exist.", "scope": "", "scopeKind": ""}, {"name": "Todo _row_to_todo(row: sqlite3.Row)", "description": "Convert a SQLite row into a Todo model.", "scope": "", "scopeKind": ""}, {"name": "None _startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Todo create_todo(payload: TodoCreate)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Response delete_todo( id: int = Path(..., ge=1, description=\"ID of the todo item.\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Todo get_todo( id: int = Path(..., ge=1, description=\"ID of the todo item.\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TodoList list_todos()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Todo toggle_todo( id: int = Path(..., ge=1, description=\"ID of the todo item.\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Todo update_todo( payload: TodoUpdate, id: int = Path(..., ge=1, description=\"ID of the todo item.\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["os.getenv", "sqlite3.connect", "conn.execute", "conn.commit", "conn.close", "datetime.now", "conn.execute"], "search-terms": ["FastAPI", "SQLite", "todo CRUD", "health check", "toggle completion"], "state": 2, "file_id": 3, "knowledge_revision": 10, "git_revision": "45b8c33f391ab6dba69b426eeb4bf9d266983354", "revision_history": [{"9": "f346581f4d5695f32dc67f1ec40aadfbdf196ef1"}, {"10": "45b8c33f391ab6dba69b426eeb4bf9d266983354"}], "ctags": [{"_type": "tag", "name": "Todo", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^class Todo(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TodoBase", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^class TodoBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TodoCreate", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^class TodoCreate(TodoBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TodoList", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^class TodoList(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TodoUpdate", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^class TodoUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_connect", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def _connect() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_init_db", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def _init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_row_to_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def _row_to_todo(row: sqlite3.Row) -> Todo:$/", "language": "Python", "typeref": "typename:Todo", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "_startup", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def _startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_utc_now_iso", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def _utc_now_iso() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    completed: Optional[bool] = Field($/", "language": "Python", "typeref": "typename:Optional[bool]", "kind": "variable", "scope": "TodoCreate", "scopeKind": "class"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    completed: bool = Field(..., description=\"Updated completion state.\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "TodoUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    completed: bool = Field(..., description=\"Whether the todo is completed.\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "Todo", "scopeKind": "class"}, {"_type": "tag", "name": "create_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def create_todo(payload: TodoCreate) -> Todo:$/", "language": "Python", "typeref": "typename:Todo", "kind": "function", "signature": "(payload: TodoCreate)"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    created_at: Optional[str] = Field(None, description=\"ISO-8601 UTC timestamp when created.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Todo", "scopeKind": "class"}, {"_type": "tag", "name": "delete_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def delete_todo($/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "( id: int = Path(..., ge=1, description=\"ID of the todo item.\"), )"}, {"_type": "tag", "name": "get_db_path", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def get_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def get_todo($/", "language": "Python", "typeref": "typename:Todo", "kind": "function", "signature": "( id: int = Path(..., ge=1, description=\"ID of the todo item.\"), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier of the todo item.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Todo", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    items: List[Todo] = Field(..., description=\"List of todo items.\")$/", "language": "Python", "typeref": "typename:List[Todo]", "kind": "variable", "scope": "TodoList", "scopeKind": "class"}, {"_type": "tag", "name": "list_todos", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def list_todos() -> TodoList:$/", "language": "Python", "typeref": "typename:TodoList", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title\\/description of the todo item.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Todo", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, description=\"Short title\\/description of the todo item/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TodoBase", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, description=\"Updated title for the todo item.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TodoUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "toggle_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def toggle_todo($/", "language": "Python", "typeref": "typename:Todo", "kind": "function", "signature": "( id: int = Path(..., ge=1, description=\"ID of the todo item.\"), )"}, {"_type": "tag", "name": "total", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    total: int = Field(..., description=\"Total number of todo items returned.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "TodoList", "scopeKind": "class"}, {"_type": "tag", "name": "update_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^def update_todo($/", "language": "Python", "typeref": "typename:Todo", "kind": "function", "signature": "( payload: TodoUpdate, id: int = Path(..., ge=1, description=\"ID of the todo item.\"), )"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-todo-manager-304448-304457/todo_backend/src/api/main.py", "pattern": "/^    updated_at: Optional[str] = Field(None, description=\"ISO-8601 UTC timestamp when last update/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Todo", "scopeKind": "class"}], "hash": "24f04f69924de1295182384c881c22ee", "format-version": 4, "code-base-name": "todo_backend", "filename": "todo_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[bool] completed", "scope": "TodoCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "bool completed", "scope": "TodoUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] created_at", "scope": "Todo", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "Todo", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Todo] items", "scope": "TodoList", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str title", "scope": "Todo", "scopeKind": "class", "description": "unavailable"}, {"name": "int total", "scope": "TodoList", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] updated_at", "scope": "Todo", "scopeKind": "class", "description": "unavailable"}]}